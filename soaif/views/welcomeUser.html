<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8">
		<slink rel="shortcut icon" href="/favicon.ico?v=1">
		<title>nutshell</title>
		<script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
		<script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
		<script src="https://cdn.firebase.com/js/client/2.1.2/firebase.js"></script>
		<script src="../../assets/nutshell.js?v=1"></script>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css">
		<link rel="stylesheet" href="../../assets/nutshell.css">
	</head>
	<body>
		<div class="container" style="margin-top: 70px">

			<div class="row clearfix">
				<div class="col-md-12 column">
					<div class="jumbotron">
						<h1>
							<strong>nut</strong>shell
						</h1>
						<p>
							<strong>nut</strong>shell puts you in control.
						</p>
						<p>
							<a class="btn btn-primary btn-large" href="#">Learn more</a>
						</p>
					</div>
					
					<div class="row clearfix">
						<div class="col-md-6 column">
							<div class="tabbable" id="tabs-979518">
								<h2><small>services</small></h2>
								<ul class="nav nav-tabs">
									<li>
										<a id="compound-services-tab" href="#panel-compound" data-toggle="tab">compound</a>
									</li>
									<li>
										<a href="#panel-enterprise" data-toggle="tab">enterprise</a>
									</li>
									<li>
										<a href="#panel-application" data-toggle="tab">application</a>
									</li>
									<li class="active">
										<a href="#panel-soaif" data-toggle="tab">soaif</a>
									</li>
								</ul>
								<div class="tab-content">
									<div class="tab-pane" id="panel-compound">
										<br>
										<div id="compoundServices"></div>
									</div>
									<div class="tab-pane active" id="panel-enterprise">
										<br>
										<div id="enterpriseServices"></div>
									</div>
									<div class="tab-pane" id="panel-application">
										<br>
										<div id="applicationServices"></div>
									</div>
									<div class="tab-pane" id="panel-soaif">
										<br>
										<div id="soaifServices"></div>
									</div>
								</div>
							</div>
						</div>
						<div class="col-md-6 column">
							<div id="services" class="container"></div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<script type="text/javascript">
			/* #nsData */
			function listServices(serviceType, parent) {

				var currentPath = nsData.request.path.split('/').splice(0, 2).join(' > ');
				$.get('http://localhost:8080/nutshell/soaif/service?type=' + serviceType, function(data) {

					var ul = $('<ul class="noBullets"></ul>');
					$('#' + serviceType + 'Services').append(ul);

					data.services.service.forEach(function(item) {
						var service = $('<li class="nsService"><a href="' + item.url + '"><img style="width: 15px;" src="../../assets/' + item.type + '.png" />' + item.name.replace(/.js/gi, '') + '</a></li>');

						service.find('a').hover(
							function() {
								$('#searchBar').val($(this).text() + ' > resources');
							}, 
							function() {
								$('#searchBar').val(currentPath);
							}
						);

						ul.append(service);
					});
				});
			}

			$('document').ready(nutshell(function() {
				listServices('compound');
				listServices('enterprise');
				listServices('application');
				listServices('soaif');

				$('#compound-services-tab').tab('show');
			}));
		</script>
	</body>
</html>